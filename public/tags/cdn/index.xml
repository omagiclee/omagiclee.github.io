<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Cdn on omagiclee</title>
    <link>https://omagiclee.github.io/tags/cdn/</link>
    <description>Recent content in Cdn on omagiclee</description>
    <generator>Hugo</generator>
    <language>en-us</language>
    <lastBuildDate>Mon, 27 Jan 2025 10:00:00 +0800</lastBuildDate>
    <atom:link href="https://omagiclee.github.io/tags/cdn/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>CDN 配置测试</title>
      <link>https://omagiclee.github.io/posts/cdn-test/</link>
      <pubDate>Mon, 27 Jan 2025 10:00:00 +0800</pubDate>
      <guid>https://omagiclee.github.io/posts/cdn-test/</guid>
      <description>&lt;h1 id=&#34;cdn-配置测试&#34;&gt;CDN 配置测试&lt;/h1&gt;&#xA;&lt;h2 id=&#34;环境信息&#34;&gt;环境信息&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;Hugo 环境&lt;/strong&gt;：{{ hugo.Environment }}&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;配置的 CDN&lt;/strong&gt;：{{ .Site.Params.cdn }}&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;CDN 数据源&lt;/strong&gt;：{{ .Site.Params.cdn.data }}&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;强制加载-mermaid-11101&#34;&gt;强制加载 Mermaid 11.10.1&lt;/h2&gt;&#xA;&lt;script&gt;&#xA;(function() {&#xA;    console.log(&#39;🔧 开始强制加载 Mermaid 11.10.1...&#39;);&#xA;    &#xA;    // 移除所有现有的 Mermaid 脚本&#xA;    const existingScripts = document.querySelectorAll(&#39;script[src*=&#34;mermaid&#34;]&#39;);&#xA;    console.log(&#39;找到现有 Mermaid 脚本数量:&#39;, existingScripts.length);&#xA;    existingScripts.forEach(script =&gt; {&#xA;        console.log(&#39;移除脚本:&#39;, script.src);&#xA;        script.remove();&#xA;    });&#xA;    &#xA;    // 等待一下确保移除完成&#xA;    setTimeout(function() {&#xA;        // 加载指定版本的 Mermaid&#xA;        const script = document.createElement(&#39;script&#39;);&#xA;        script.src = &#39;https://cdn.jsdelivr.net/npm/mermaid@11.10.1/dist/mermaid.min.js&#39;;&#xA;        script.onload = function() {&#xA;            console.log(&#39;✅ Mermaid 11.10.1 加载成功&#39;);&#xA;            if (typeof mermaid !== &#39;undefined&#39;) {&#xA;                console.log(&#39;Mermaid 版本:&#39;, mermaid.version);&#xA;                // 重新初始化所有 Mermaid 图表&#xA;                mermaid.initialize({ &#xA;                    startOnLoad: true,&#xA;                    theme: &#39;default&#39;&#xA;                });&#xA;                &#xA;                // 查找所有 Mermaid 图表并重新渲染&#xA;                const mermaidElements = document.querySelectorAll(&#39;.mermaid&#39;);&#xA;                console.log(&#39;找到 Mermaid 图表数量:&#39;, mermaidElements.length);&#xA;                mermaidElements.forEach(element =&gt; {&#xA;                    try {&#xA;                        mermaid.init(undefined, element);&#xA;                    } catch (error) {&#xA;                        console.error(&#39;渲染图表失败:&#39;, error);&#xA;                    }&#xA;                });&#xA;            }&#xA;        };&#xA;        script.onerror = function() {&#xA;            console.error(&#39;❌ 加载 Mermaid 11.10.1 失败&#39;);&#xA;        };&#xA;        document.head.appendChild(script);&#xA;    }, 100);&#xA;})();&#xA;&lt;/script&gt;&#xA;&lt;h2 id=&#34;mermaid-测试&#34;&gt;Mermaid 测试&lt;/h2&gt;&#xA;&lt;div class=&#34;mermaid&#34; id=&#34;id-1&#34;&gt;&lt;/div&gt;&#xA;&lt;h2 id=&#34;版本检测&#34;&gt;版本检测&lt;/h2&gt;&#xA;&lt;script&gt;&#xA;document.addEventListener(&#39;DOMContentLoaded&#39;, function() {&#xA;    setTimeout(function() {&#xA;        const versionInfo = document.getElementById(&#39;version-info&#39;);&#xA;        &#xA;        if (typeof mermaid !== &#39;undefined&#39;) {&#xA;            // 尝试多种方式获取版本&#xA;            let version = &#39;未知&#39;;&#xA;            if (mermaid.version) {&#xA;                version = mermaid.version;&#xA;            } else if (mermaid.default &amp;&amp; mermaid.default.version) {&#xA;                version = mermaid.default.version;&#xA;            } else if (window.mermaid &amp;&amp; window.mermaid.version) {&#xA;                version = window.mermaid.version;&#xA;            }&#xA;            &#xA;            // 检查 mermaid 对象的属性&#xA;            const mermaidProps = Object.keys(mermaid).join(&#39;, &#39;);&#xA;            &#xA;            // 检查页面上的脚本标签&#xA;            const mermaidScripts = Array.from(document.querySelectorAll(&#39;script[src*=&#34;mermaid&#34;]&#39;))&#xA;                .map(script =&gt; script.src)&#xA;                .join(&#39;&lt;br&gt;&#39;);&#xA;            &#xA;            versionInfo.innerHTML = `&#xA;                &lt;div style=&#34;background: #d4edda; padding: 15px; border-radius: 5px; margin: 10px 0;&#34;&gt;&#xA;                    &lt;h3&gt;✅ Mermaid 加载成功&lt;/h3&gt;&#xA;                    &lt;p&gt;&lt;strong&gt;版本：&lt;/strong&gt; ${version}&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
